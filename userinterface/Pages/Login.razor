@page "/login"
@inject NavigationManager nm

<style>
    /* Center the form vertically and horizontally */
    .login-container {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRcgOrr2dvAxPSPbDYPdrrqVN1Ms2WLyrIUZqCNajECNw&s.jpg');
        background-size: cover;
        background-position: center;
    }

    /* Style for the login form */
    .login-form {
        max-width: 300px; /* Adjust the width of the form */
        padding: 20px;
        border: 1px solid rgba(0, 0, 0, 0.1); /* Add a subtle border */
        border-radius: 12px;
        background-color: rgba(255, 255, 255, 0.9); /* Transparent white background */
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

        .login-form h1 {
            text-align: center;
            margin-bottom: 20px;
            color: #333; /* Darken the text color */
        }

        .login-form .form-group {
            margin-bottom: 20px;
        }

        .login-form label {
            font-weight: bold;
        }

        .login-form input[type="text"],
        .login-form input[type="password"] {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 6px;
        }

        .login-form button {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            color: #fff;
            background-color: #007bff;
            border: none;
            border-radius: 20px; /* Make the buttons oval-shaped */
            cursor: pointer;
            transition: background-color 0.3s; /* Smooth hover transition */
        }

            .login-form button:hover {
                background-color: #0056b3;
            }

        .login-form .btn-danger {
            background-color: #dc3545;
        }

            .login-form .btn-danger:hover {
                background-color: #c82333;
            }

        .login-form .alert-danger {
            margin-bottom: 20px;
        }
</style>


<div class="login-container">
    <div class="login-form">
        <h1> Login in to Your Account</h1>
        <hr />

        @if (!string.IsNullOrEmpty(ErrorMessage))
        {
            <div class="alert alert-danger" role="alert">
                @ErrorMessage
            </div>
        }

        <form @onsubmit="HandleSubmit">
            <div class="form-group">
                <label for="uname">Username</label>
                <input type="text" class="form-control" placeholder="Enter Username" @bind="Username" required>
            </div>

            <div class="form-group">
                <label for="psw">Password</label>
                <input type="password" class="form-control" placeholder="Enter Password" @bind="Password" required>
            </div>

            <div class="text-center">
                <button type="submit" class="btn btn-primary">
                    Login
                </button>
                <button type="button" class="btn btn-danger" @onclick="Cancel">
                    Cancel
                </button>
            </div>
        </form>
    </div>
</div>

@code {
    private string? Username { get; set; }
    private string? Password { get; set; }
    private string? ErrorMessage { get; set; } = "";

    private async Task HandleSubmit()
    {
        // **Security Improvement:** Never store passwords in plain text.
        // Use a secure hashing algorithm like bcrypt to store password hashes.
        // Validate the entered password against the stored hash.

        // Replace this with proper password validation logic
        if (Username == "faraz" && Password == "123") // This is for demonstration only, not secure!
        {
            nm.NavigateTo("/DashBoard");
        }
        else
        {
            ErrorMessage = "Error: Incorrect username or password";
        }
    }

    private void Cancel()
    {
        Username = "";
        Password = "";
        ErrorMessage = "";
    }
}
